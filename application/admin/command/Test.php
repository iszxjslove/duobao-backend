<?php


namespace app\admin\command;


use fast\Http;
use think\console\Command;
use think\console\Input;
use think\console\Output;

class Test extends Command
{
    protected function configure()
    {
        $this->setName('test')->setDescription('Test');
    }

    protected function execute(Input $input, Output $output)
    {
        $content = '<div class="row-flex g10" id="stocklist"><div class="col l3 m4 ms6"><div style="" data-id="19858" class="p10"><a class="white-box rel" onclick="toDetail(this)" href="/EN/the-collection/jewelry/Riginov/Fine_Jewelry/19858.aspx"><div class="img-container"><div class="img-wrapper"><img src="/uploads/images/products/big/Riginov-Fine-Jewelry-WEDDING-RINGS-23.jpg?w=300"></div></div><strong>Riginov Fine Jewelry</strong><span> WEDDING RINGS</span><em class="currency">€  2 140</em><div class="product-wishlist " onclick="addToWishlistFromStock(19858,this);return false;"></div></a></div></div><div class="col l3 m4 ms6"><div style="" data-id="19855" class="p10"><a class="white-box rel" onclick="toDetail(this)" href="/EN/the-collection/jewelry/Riginov/Fine_Jewelry/19855.aspx"><div class="img-container"><div class="img-wrapper"><img src="/uploads/images/products/big/Riginov-Fine-Jewelry-WEDDING-RINGS-22.jpg?w=300"></div></div><strong>Riginov Fine Jewelry</strong><span> WEDDING RINGS</span><em class="currency">€  2 400</em><div class="product-wishlist " onclick="addToWishlistFromStock(19855,this);return false;"></div></a></div></div><div class="col l3 m4 ms6"><div style="" data-id="19863" class="p10"><a class="white-box rel" onclick="toDetail(this)" href="/EN/the-collection/jewelry/Riginov/Fine_Jewelry/19863.aspx"><div class="img-container"><div class="img-wrapper"><img src="/uploads/images/products/big/Riginov-Fine-Jewelry-WEDDING-RINGS-21.jpg?w=300"></div></div><strong>Riginov Fine Jewelry</strong><span> WEDDING RINGS</span><em class="currency">€  2 340</em><div class="product-wishlist " onclick="addToWishlistFromStock(19863,this);return false;"></div></a></div></div><div class="col l3 m4 ms6"><div style="" data-id="19865" class="p10"><a class="white-box rel" onclick="toDetail(this)" href="/EN/the-collection/jewelry/Riginov/Fine_Jewelry/19865.aspx"><div class="img-container"><div class="img-wrapper"><img src="/uploads/images/products/big/Riginov-Fine-Jewelry-WEDDING-RINGS-20.jpg?w=300"></div></div><strong>Riginov Fine Jewelry</strong><span> WEDDING RINGS</span><em class="currency">€  2 500</em><div class="product-wishlist " onclick="addToWishlistFromStock(19865,this);return false;"></div></a></div></div><div class="col l3 m4 ms6"><div style="" data-id="19864" class="p10"><a class="white-box rel" onclick="toDetail(this)" href="/EN/the-collection/jewelry/Riginov/Fine_Jewelry/19864.aspx"><div class="img-container"><div class="img-wrapper"><img src="/uploads/images/products/big/Riginov-Fine-Jewelry-WEDDING-RINGS-19.jpg?w=300"></div></div><strong>Riginov Fine Jewelry</strong><span> WEDDING RINGS</span><em class="currency">€  2 500</em><div class="product-wishlist " onclick="addToWishlistFromStock(19864,this);return false;"></div></a></div></div><div class="col l3 m4 ms6"><div style="" data-id="19859" class="p10"><a class="white-box rel" onclick="toDetail(this)" href="/EN/the-collection/jewelry/Riginov/Fine_Jewelry/19859.aspx"><div class="img-container"><div class="img-wrapper"><img src="/uploads/images/products/big/Riginov-Fine-Jewelry-WEDDING-RINGS-18.jpg?w=300"></div></div><strong>Riginov Fine Jewelry</strong><span> WEDDING RINGS</span><em class="currency">€  2 140</em><div class="product-wishlist " onclick="addToWishlistFromStock(19859,this);return false;"></div></a></div></div><div class="col l3 m4 ms6"><div style="" data-id="19866" class="p10"><a class="white-box rel" onclick="toDetail(this)" href="/EN/the-collection/jewelry/Riginov/Fine_Jewelry/19866.aspx"><div class="img-container"><div class="img-wrapper"><img src="/uploads/images/products/big/Riginov-Fine-Jewelry-WEDDING-RINGS-17.jpg?w=300"></div></div><strong>Riginov Fine Jewelry</strong><span> WEDDING RINGS</span><em class="currency">€  2 500</em><div class="product-wishlist " onclick="addToWishlistFromStock(19866,this);return false;"></div></a></div></div><div class="col l3 m4 ms6"><div style="" data-id="19819" class="p10"><a class="white-box rel" onclick="toDetail(this)" href="/EN/the-collection/jewelry/Riginov/Fine_Jewelry/19819.aspx"><div class="img-container"><div class="img-wrapper"><img src="/uploads/images/products/big/Riginov-Fine-Jewelry-WEDDING-RINGS-16.jpg?w=300"></div></div><strong>Riginov Fine Jewelry</strong><span> WEDDING RINGS</span><em class="currency">€  2 040</em><div class="product-wishlist " onclick="addToWishlistFromStock(19819,this);return false;"></div></a></div></div><div class="col l3 m4 ms6"><div style="" data-id="19818" class="p10"><a class="white-box rel" onclick="toDetail(this)" href="/EN/the-collection/jewelry/Riginov/Fine_Jewelry/19818.aspx"><div class="img-container"><div class="img-wrapper"><img src="/uploads/images/products/big/Riginov-Fine-Jewelry-WEDDING-RINGS-15.jpg?w=300"></div></div><strong>Riginov Fine Jewelry</strong><span> WEDDING RINGS</span><em class="currency">€  2 040</em><div class="product-wishlist " onclick="addToWishlistFromStock(19818,this);return false;"></div></a></div></div><div class="col l3 m4 ms6"><div style="" data-id="19756" class="p10"><a class="white-box rel" onclick="toDetail(this)" href="/EN/the-collection/jewelry/Riginov/Fine_Jewelry/19756.aspx"><div class="img-container"><div class="img-wrapper"><img src="/uploads/images/products/big/Riginov-Fine-Jewelry-WEDDING-RINGS-14.jpg?w=300"></div></div><strong>Riginov Fine Jewelry</strong><span> WEDDING RINGS</span><em class="currency">€  1 640</em><div class="product-wishlist " onclick="addToWishlistFromStock(19756,this);return false;"></div></a></div></div><div class="col l3 m4 ms6"><div style="" data-id="19758" class="p10"><a class="white-box rel" onclick="toDetail(this)" href="/EN/the-collection/jewelry/Riginov/Fine_Jewelry/19758.aspx"><div class="img-container"><div class="img-wrapper"><img src="/uploads/images/products/big/Riginov-Fine-Jewelry-WEDDING-RINGS-13.jpg?w=300"></div></div><strong>Riginov Fine Jewelry</strong><span> WEDDING RINGS</span><em class="currency">€  2 440</em><div class="product-wishlist " onclick="addToWishlistFromStock(19758,this);return false;"></div></a></div></div><div class="col l3 m4 ms6"><div style="" data-id="20023" class="p10"><a class="white-box rel" onclick="toDetail(this)" href="/EN/the-collection/jewelry/Riginov/Fine_Jewelry/20023.aspx"><div class="img-container"><div class="img-wrapper"><img src="/uploads/images/products/big/Riginov-Fine-Jewelry-INVISIBLE-ROUND-DIAMOND-TWIN-SET-SIDE-STONE-RING-3.jpg?w=300"></div></div><strong>Riginov Fine Jewelry</strong><span> INVISIBLE ROUND DIAMOND TWIN-SET SIDE STONE RING</span><em class="currency">€  2 390</em><div class="product-wishlist " onclick="addToWishlistFromStock(20023,this);return false;"></div></a></div></div><div class="col l3 m4 ms6"><div style="" data-id="20031" class="p10"><a class="white-box rel" onclick="toDetail(this)" href="/EN/the-collection/jewelry/Riginov/Fine_Jewelry/20031.aspx"><div class="img-container"><div class="img-wrapper"><img src="/uploads/images/products/big/Riginov-Fine-Jewelry-INVISIBLE-ROUND-DIAMOND-TWIN-SET-SIDE-STONE-RING-2.jpg?w=300"></div></div><strong>Riginov Fine Jewelry</strong><span> INVISIBLE ROUND DIAMOND TWIN-SET SIDE STONE RING</span><em class="currency">€  2 490</em><div class="product-wishlist " onclick="addToWishlistFromStock(20031,this);return false;"></div></a></div></div><div class="col l3 m4 ms6"><div style="" data-id="19945" class="p10"><a class="white-box rel" onclick="toDetail(this)" href="/EN/the-collection/jewelry/Riginov/Fine_Jewelry/19945.aspx"><div class="img-container"><div class="img-wrapper"><img src="/uploads/images/products/big/Riginov-Fine-Jewelry-CUSHION-FANCY-YELLOW-DOUBLE-HALO-RING-1.jpg?w=300"></div></div><strong>Riginov Fine Jewelry</strong><span> CUSHION FANCY YELLOW DOUBLE HALO RING</span><em class="currency">€  6 600</em><div class="product-wishlist " onclick="addToWishlistFromStock(19945,this);return false;"></div></a></div></div><div class="col l3 m4 ms6"><div style="" data-id="19709" class="p10"><a class="white-box rel" onclick="toDetail(this)" href="/EN/the-collection/jewelry/Riginov/Fine_Jewelry/19709.aspx"><div class="img-container"><div class="img-wrapper"><img src="/uploads/images/products/big/Riginov-Fine-Jewelry-ROUND-GREEN-GARNETS--ROUND-DIAMONDS-PAVE-RING-1.jpg?w=300"></div></div><strong>Riginov Fine Jewelry</strong><span> ROUND GREEN GARNETS &amp; ROUND DIAMONDS PAVE RING</span><em class="currency">€  2 490</em><div class="product-wishlist " onclick="addToWishlistFromStock(19709,this);return false;"></div></a></div></div><div class="col l3 m4 ms6"><div style="" data-id="19708" class="p10"><a class="white-box rel" onclick="toDetail(this)" href="/EN/the-collection/jewelry/Riginov/Fine_Jewelry/19708.aspx"><div class="img-container"><div class="img-wrapper"><img src="/uploads/images/products/big/Riginov-Fine-Jewelry-ROUND-BLUE-SAPPHIRES--ROUND-DIAMONDS-PAVE-RING-4.jpg?w=300"></div></div><strong>Riginov Fine Jewelry</strong><span> ROUND BLUE SAPPHIRES &amp; ROUND DIAMONDS PAVE RING</span><em class="currency">€  1 800</em><div class="product-wishlist " onclick="addToWishlistFromStock(19708,this);return false;"></div></a></div></div><div class="col l3 m4 ms6"><div style="" data-id="19978" class="p10"><a class="white-box rel" onclick="toDetail(this)" href="/EN/the-collection/jewelry/Riginov/Fine_Jewelry/19978.aspx"><div class="img-container"><div class="img-wrapper"><img src="/uploads/images/products/big/Riginov-Fine-Jewelry-ROUND-DIAMONDS-MULTI-STONE-RING-12.jpg?w=300"></div></div><strong>Riginov Fine Jewelry</strong><span> ROUND DIAMONDS MULTI STONE RING</span><em class="currency">€  4 900</em><div class="product-wishlist " onclick="addToWishlistFromStock(19978,this);return false;"></div></a></div></div><div class="col l3 m4 ms6"><div style="" data-id="19970" class="p10"><a class="white-box rel" onclick="toDetail(this)" href="/EN/the-collection/jewelry/Riginov/Fine_Jewelry/19970.aspx"><div class="img-container"><div class="img-wrapper"><img src="/uploads/images/products/big/Riginov-Fine-Jewelry-ROUND-DIAMONDS-BAND-RING-65.jpg?w=300"></div></div><strong>Riginov Fine Jewelry</strong><span> ROUND DIAMONDS BAND RING</span><em class="currency">€  5 500</em><div class="product-wishlist " onclick="addToWishlistFromStock(19970,this);return false;"></div></a></div></div><div class="col l3 m4 ms6"><div style="" data-id="19968" class="p10"><a class="white-box rel" onclick="toDetail(this)" href="/EN/the-collection/jewelry/Riginov/Fine_Jewelry/19968.aspx"><div class="img-container"><div class="img-wrapper"><img src="/uploads/images/products/big/Riginov-Fine-Jewelry-ROUND-DIAMONDS-MULTI-STONE-RING-11.jpg?w=300"></div></div><strong>Riginov Fine Jewelry</strong><span> ROUND DIAMONDS MULTI STONE RING</span><em class="currency">€  4 950</em><div class="product-wishlist " onclick="addToWishlistFromStock(19968,this);return false;"></div></a></div></div><div class="col l3 m4 ms6"><div style="" data-id="19967" class="p10"><a class="white-box rel" onclick="toDetail(this)" href="/EN/the-collection/jewelry/Riginov/Fine_Jewelry/19967.aspx"><div class="img-container"><div class="img-wrapper"><img src="/uploads/images/products/big/Riginov-Fine-Jewelry-ROUND-DIAMONDS-BAND-RING-64.jpg?w=300"></div></div><strong>Riginov Fine Jewelry</strong><span> ROUND DIAMONDS BAND RING</span><em class="currency">€  4 950</em><div class="product-wishlist " onclick="addToWishlistFromStock(19967,this);return false;"></div></a></div></div><div class="col l3 m4 ms6"><div style="" data-id="19849" class="p10"><a class="white-box rel" onclick="toDetail(this)" href="/EN/the-collection/jewelry/Riginov/Fine_Jewelry/19849.aspx"><div class="img-container"><div class="img-wrapper"><img src="/uploads/images/products/big/Riginov-Fine-Jewelry-ROUND-DIAMONDS-BAND-RING-63.jpg?w=300"></div></div><strong>Riginov Fine Jewelry</strong><span> ROUND DIAMONDS BAND RING</span><em class="currency">€  3 990</em><div class="product-wishlist " onclick="addToWishlistFromStock(19849,this);return false;"></div></a></div></div><div class="col l3 m4 ms6"><div style="" data-id="19847" class="p10"><a class="white-box rel" onclick="toDetail(this)" href="/EN/the-collection/jewelry/Riginov/Fine_Jewelry/19847.aspx"><div class="img-container"><div class="img-wrapper"><img src="/uploads/images/products/big/Riginov-Fine-Jewelry-ROUND-DIAMONDS-BAND-RING-62.jpg?w=300"></div></div><strong>Riginov Fine Jewelry</strong><span> ROUND DIAMONDS BAND RING</span><em class="currency">€  4 800</em><div class="product-wishlist " onclick="addToWishlistFromStock(19847,this);return false;"></div></a></div></div><div class="col l3 m4 ms6"><div style="" data-id="19846" class="p10"><a class="white-box rel" onclick="toDetail(this)" href="/EN/the-collection/jewelry/Riginov/Fine_Jewelry/19846.aspx"><div class="img-container"><div class="img-wrapper"><img src="/uploads/images/products/big/Riginov-Fine-Jewelry-ROUND-DIAMONDS-MULTI-STONE-RING-10.jpg?w=300"></div></div><strong>Riginov Fine Jewelry</strong><span> ROUND DIAMONDS MULTI STONE RING</span><em class="currency">€  4 990</em><div class="product-wishlist " onclick="addToWishlistFromStock(19846,this);return false;"></div></a></div></div><div class="col l3 m4 ms6"><div style="" data-id="19433" class="p10"><a class="white-box rel" onclick="toDetail(this)" href="/EN/the-collection/jewelry/Riginov/Fine_Jewelry/19433.aspx"><div class="img-container"><div class="img-wrapper"><img src="/uploads/images/products/big/Riginov-Fine-Jewelry-ROUND-DIAMONDS-MULTI-STONE-RING-9.jpg?w=300"></div></div><strong>Riginov Fine Jewelry</strong><span> ROUND DIAMONDS MULTI STONE RING</span><em class="currency">€  2 890</em><div class="product-wishlist " onclick="addToWishlistFromStock(19433,this);return false;"></div></a></div></div></div>';

        preg_match_all('/img-wrapper.*?<img\ssrc=\"(.*?)\"/', $content, $match);

        foreach ($match[1] as $k => &$src) {
            $url = 'https://riginov.com/' . preg_replace('/w=\d+$/', 'w=600', $src);
            $image_name = 'public/test/'.$k.'.jpg';//文件名称与路径
            $this->saveFile($url, $image_name);
        }
    }

    public function saveFile($url, $image_name)
    {
        $ch = curl_init ($url);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($ch, CURLOPT_BINARYTRANSFER,1);
        $img = curl_exec ($ch);
        curl_close ($ch);
        $fp = fopen($image_name,'w');
        fwrite($fp, $img);
        fclose($fp);
    }
}